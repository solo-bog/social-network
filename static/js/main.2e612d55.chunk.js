(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{10:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__S0nSV",dialogsItems:"Dialogs_dialogsItems__2mGt1",dialog:"Dialogs_dialog__e-fNE",active:"Dialogs_active__G_DeA",dialogImage:"Dialogs_dialogImage__1JP85",dialogsInfo:"Dialogs_dialogsInfo__2bIyR",messages:"Dialogs_messages__2ITMS",message:"Dialogs_message__3w7Hx",myMessage:"Dialogs_myMessage__3YYGz",messageText:"Dialogs_messageText__1Yxzl",messagesInput:"Dialogs_messagesInput__Id-x5"}},13:function(e,t,n){e.exports={nav:"Navbar_nav__2cevN",item:"Navbar_item__3Igov",active:"Navbar_active__1mBxT"}},24:function(e,t,n){e.exports={formControl:"FormsControls_formControl__388sf",error:"FormsControls_error__2nHqD",errorText:"FormsControls_errorText__2NdBo"}},25:function(e,t,n){e.exports={userItem:"UsersList_userItem__2Gfs_",userPhoto:"UsersList_userPhoto__1Ae9M",userActionBtn:"UsersList_userActionBtn__RsYAe",userInfo:"UsersList_userInfo__3Z94o"}},31:function(e,t,n){e.exports={header:"Header_header__o0VLS",header__logo:"Header_header__logo__3KfuX",loginBlock:"Header_loginBlock__1lc82"}},37:function(e,t,n){e.exports={pageNumber:"Pagination_pageNumber__Qt3qZ",selectedPage:"Pagination_selectedPage__iSIl7"}},38:function(e,t,n){e.exports={profileInfo:"ProfileInfo_profileInfo__u6C1H",profileInfo__photo:"ProfileInfo_profileInfo__photo__2-MbV",profileInfo__data:"ProfileInfo_profileInfo__data__kOCFS"}},39:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__zBtJd",posts:"MyPosts_posts__3O_4H"}},53:function(e,t,n){e.exports={ldsEllipsis:"Preloader_ldsEllipsis__3SZJW","lds-ellipsis1":"Preloader_lds-ellipsis1__1EWwZ","lds-ellipsis2":"Preloader_lds-ellipsis2__2Mp94","lds-ellipsis3":"Preloader_lds-ellipsis3__1RPGU"}},55:function(e,t,n){e.exports={item:"Post_item__2KeNk"}},62:function(e,t,n){},86:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(1),a=n.n(s),c=n(28),i=n.n(c),o=(n(62),n(8)),u=n(5),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))},d=n(9),j=n(51),p=n(4),f=n.n(p),b=n(11),h=n(22),g=n(3),m=n(52).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"4d15cfab-86d6-416c-b19b-dc3aef73fd8b"}}),O=function(e,t){return m.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},x=function(e){return m.post("follow/".concat(e)).then((function(e){return e.data}))},v=function(e){return m.delete("follow/".concat(e)).then((function(e){return e.data}))},_=function(e){return m.get("profile/".concat(e)).then((function(e){return e.data}))},w=function(e){return m.get("profile/status/".concat(e)).then((function(e){return e.data}))},P=function(e){return m.put("profile/status",{status:e}).then((function(e){return e.data}))},y=function(e){var t=new FormData;return t.append("image",e.files[0]),m.post("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},I=function(){return m.get("auth/me").then((function(e){return e.data}))},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},C=function(){return m.delete("auth/login").then((function(e){return e.data}))},N=n.p+"static/media/user.8d4016a0.svg",E="ADD-POST",k="SET_USER_PROFILE",M="UPDATE_USER_STATUS",A="DELETE_POST",T={posts:[{id:1,message:"I like old films. They are atmospheres.",likesCount:10},{id:2,message:"Baron Corbin is my brother. He is cool dude.",likesCount:12},{id:3,message:"I am very happy girl.",likesCount:32},{id:4,message:"Hi, i'm Alice. It is my first post in this network.",likesCount:2}],profile:{photos:{small:N,large:N}},status:""},U=function(e){return{type:M,status:e}},D=function(e){return function(){var t=Object(b.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e);case 2:r=t.sent,n({type:k,profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var n={id:e.posts.length+1,message:t.postText,likesCount:2};return Object(g.a)(Object(g.a)({},e),{},{posts:[].concat(Object(h.a)(e.posts),[n])});case k:return Object(g.a)(Object(g.a)({},e),{},{profile:t.profile});case M:return Object(g.a)(Object(g.a)({},e),{},{status:t.status});case A:return Object(g.a)(Object(g.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});default:return e}},R="ADD-MESSAGE",L={dialogs:[{id:1,name:"Dima",img:"https://cdn.shopify.com/s/files/1/0045/5104/9304/t/27/assets/AC_ECOM_SITE_2020_REFRESH_1_INDEX_M2_THUMBS-V2-1.jpg?v=8913815134086573859"},{id:2,name:"Andrey",img:"https://dm.henkel-dam.com/is/image/henkel/men_perfect_com_thumbnails_home_pack_400x400-wcms-international?scl=1&fmt=jpg"},{id:3,name:"Sveta",img:"https://i.pinimg.com/originals/81/a9/4a/81a94a7d0454d9ec58f1ea8db69d9b2e.jpg"},{id:4,name:"Tima",img:"https://www.adobe.com/content/dam/cc/us/en/creative-cloud/photography/discover/portrait-photography/CODERED_B1_portrait_photography-P4b_438x447.jpg.img.jpg"},{id:5,name:"Maks",img:"https://theportraitmasters.com/wp-content/uploads/2019/02/DayronVera_SelfPortrait-1-300x300.jpg"}],messages:[{id:1,message:"Hi",isMy:!1},{id:2,message:"How is your education",isMy:!1},{id:3,message:"Hi. All is cool!",isMy:!0},{id:4,message:"Goodbye",isMy:!1}]},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(g.a)(Object(g.a)({},e),{},{messages:[].concat(Object(h.a)(e.messages),[{id:e.messages.length+1,message:t.newMessageText,isMy:!0}])});default:return e}},B="FOLLOW",H="UNFOLLOW",G="SET_USERS",q="SET_CURRENT_PAGE",V="SET_TOTAL_USERS_COUNT",J="TOOGLE_IS_FETCHING",W="TOGGLE_IS_FOLLOWING_PROCESS",X={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},Y=function(e,t,n){return e.map((function(e){var r=e;return r.id===t&&(r.followed=n),r}))},Z=function(e){return{type:B,userId:e}},K=function(e){return{type:H,userId:e}},Q=function(e){return{type:J,isFetching:e}},$=function(e,t){return{type:W,isFollowing:e,userId:t}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(g.a)(Object(g.a)({},e),{},{users:Y(e.users,t.userId,!0)});case H:return Object(g.a)(Object(g.a)({},e),{},{users:Y(e.users,t.userId,!1)});case G:return Object(g.a)(Object(g.a)({},e),{},{users:Object(h.a)(t.users)});case q:return Object(g.a)(Object(g.a)({},e),{},{currentPage:t.currentPage});case V:return Object(g.a)(Object(g.a)({},e),{},{totalUsersCount:t.totalUsersCount});case J:return Object(g.a)(Object(g.a)({},e),{},{isFetching:t.isFetching});case W:return Object(g.a)(Object(g.a)({},e),{},{followingInProgress:t.isFollowing?[].concat(Object(h.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},te="SET_USER_DATA",ne="SET_FORM_ERROR",re={userId:null,email:null,login:null,isAuth:!1,formError:null},se=function(e,t,n,r){return{type:te,data:{userId:e,email:t,login:n,isAuth:r}}},ae=function(e){return{type:ne,error:e}},ce=function(){return function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,s,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:0===(n=e.sent).resultCode&&(r=n.data,s=r.id,a=r.login,c=r.email,t(se(s,c,a,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Object(g.a)(Object(g.a)({},e),t.data);case ne:return Object(g.a)(Object(g.a)({},e),{},{formError:t.error});default:return e}},oe="INITIALIZED_SUCCESS",ue={initialized:!1},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(g.a)(Object(g.a)({},e),{},{initialized:!0});default:return e}},de=Object(d.c)({profilePage:F,dialogsPage:z,usersPage:ee,auth:ie,app:le}),je=Object(d.d)(Object(d.a)(j.a),window.devToolsExtension?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}),pe=Object(d.e)(de,je);window.store=pe;var fe=pe,be=n(18),he=n(19),ge=n(21),me=n(20),Oe=(n(86),n(6)),xe=n(13),ve=n.n(xe),_e=function(){return Object(r.jsxs)("nav",{className:ve.a.nav,children:[Object(r.jsx)("div",{className:ve.a.item,children:Object(r.jsx)(o.b,{to:"/profile",activeClassName:ve.a.active,children:"Profile"})}),Object(r.jsx)("div",{className:ve.a.item,children:Object(r.jsx)(o.b,{to:"/dialogs",activeClassName:ve.a.active,children:"Messages"})}),Object(r.jsx)("div",{className:ve.a.item,children:Object(r.jsx)(o.b,{to:"/news",activeClassName:ve.a.active,children:"News"})}),Object(r.jsx)("div",{className:ve.a.item,children:Object(r.jsx)(o.b,{to:"/music",activeClassName:ve.a.active,children:"Music"})}),Object(r.jsx)("div",{className:ve.a.item,children:Object(r.jsx)(o.b,{to:"/settings",activeClassName:ve.a.active,children:"Settings"})}),Object(r.jsx)("div",{className:ve.a.item,children:Object(r.jsx)(o.b,{to:"/users",activeClassName:ve.a.active,children:"Users"})})]})},we=function(){return Object(r.jsx)("div",{children:"News"})},Pe=function(){return Object(r.jsx)("div",{children:"Music"})},ye=n(12),Ie=n(10),Se=n.n(Ie),Ce=function(e){if(!e)return"Field is require"},Ne=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e)}},Ee=function(e){return function(t){if(t&&t.length<e)return"Min length is ".concat(e)}},ke=function(e){return{isAuth:e.auth.isAuth}},Me=function(e){return Object(u.b)(ke)((function(t){return t.isAuth?Object(r.jsx)(e,{}):Object(r.jsx)(Oe.a,{to:"/login"})}))},Ae=Object(d.d)(Me,Object(u.b)((function(e){return{userPhoto:e.profilePage.profile.photos.large,myId:e.auth.userId}}),{getProfile:D,uploadPhoto:function(e){return function(){var t=Object(b.a)(f.a.mark((function t(n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y(e);case 3:0===t.sent.resultCode&&n(D(r().profilePage.profile.userId)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()}}))((function(e){var t=e.myId,n=e.userPhoto,c=e.uploadPhoto,i=e.getProfile;Object(s.useEffect)((function(){i(t)}),[t,i]);var o=a.a.createRef();return Object(r.jsxs)("div",{children:[Object(r.jsx)("img",{height:"100px",src:n,alt:""}),Object(r.jsx)(ye.b,{onSubmit:function(){return c(o.current)},children:function(e){var t=e.handleSubmit;return Object(r.jsxs)("form",{className:Se.a.messagesInput,onSubmit:t,children:[Object(r.jsx)("div",{children:Object(r.jsx)(ye.a,{validate:Ce,name:"photo",component:"input",children:function(e){var t=e.input,n=e.meta;return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)("label",{htmlFor:"uploadPhoto",children:"Select photo"})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",Object(g.a)(Object(g.a)({ref:o},t),{},{type:"file",id:"uploadPhoto"}))}),Object(r.jsx)("div",{children:n.error&&n.touched&&Object(r.jsx)("span",{children:n.error})})]})}})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Send"})})]})}})]})})),Te=function(e){var t=e.id,n=e.img,s=e.name,a="/dialogs/".concat(t);return Object(r.jsxs)(o.b,{className:Se.a.dialog,to:a,activeClassName:Se.a.active,children:[Object(r.jsx)("div",{className:Se.a.dialogImage,children:Object(r.jsx)("img",{src:n,alt:"avatar"})}),Object(r.jsx)("div",{className:Se.a.dialogsInfo,children:Object(r.jsx)("span",{children:s})})]})},Ue=function(e){var t=e.isMy,n=e.message;return Object(r.jsxs)("div",{className:"".concat(Se.a.message," ").concat(t?Se.a.myMessage:""),children:[Object(r.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0045/5104/9304/t/27/assets/AC_ECOM_SITE_2020_REFRESH_1_INDEX_M2_THUMBS-V2-1.jpg?v=8913815134086573859",alt:"foto"}),Object(r.jsx)("div",{className:Se.a.messageText,children:n})]})},De=n(56),Fe=n(24),Re=n.n(Fe),Le=function(e){e.input;var t=e.meta,n=Object(De.a)(e,["input","meta"]),s=t.error&&t.touched;return Object(r.jsx)("div",{className:"".concat(Re.a.formControl," ").concat(s?Re.a.error:""),children:Object(r.jsxs)("div",{children:[n.children,s&&Object(r.jsx)("span",{className:Re.a.errorText,children:t.error})]})})},ze=function(e){return Object(r.jsx)(Le,Object(g.a)(Object(g.a)({},e),{},{children:Object(r.jsx)("textarea",Object(g.a)(Object(g.a)({},e.input),e))}))},Be=function(e){return Object(r.jsx)(Le,Object(g.a)(Object(g.a)({},e),{},{children:Object(r.jsx)("input",Object(g.a)(Object(g.a)({},e.input),e))}))},He=function(e){return Object(r.jsx)(ye.b,{onSubmit:function(t){e.addNewMessage(t.textMessage)},children:function(e){var t=e.handleSubmit;return Object(r.jsxs)("form",{className:Se.a.messagesInput,onSubmit:t,children:[Object(r.jsx)("div",{children:Object(r.jsx)(ye.a,{validate:Ce,placeholder:"Enter text...",name:"textMessage",component:ze})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Send"})})]})}})},Ge=function(e){var t=e.dialogsPage,n=e.addNewMessage,s=t,a=s.dialogs.map((function(e){return Object(r.jsx)(Te,{name:e.name,id:e.id,img:e.img},e.id)})),c=s.messages.map((function(e){return Object(r.jsx)(Ue,{message:e.message,id:e.id,isMy:e.isMy},e.id)}));return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:Se.a.dialogs,children:[Object(r.jsx)("div",{className:Se.a.dialogsItems,children:a}),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:Se.a.messages,children:c}),Object(r.jsx)("div",{children:Object(r.jsx)(He,{addNewMessage:n})})]})]})})},qe=Object(d.d)(Me,Object(u.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{addNewMessage:function(t){e({type:R,newMessageText:t})}}})))(Ge),Ve=n(53),Je=n.n(Ve),We=function(){return Object(r.jsxs)("div",{className:Je.a.ldsEllipsis,children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})},Xe=n(25),Ye=n.n(Xe),Ze=function(e){return Object(r.jsxs)("div",{className:Ye.a.userItem,children:[Object(r.jsx)("div",{className:Ye.a.userPhoto,children:Object(r.jsx)(o.b,{to:"/profile/".concat(e.user.id),children:Object(r.jsx)("img",{src:null!=e.user.photos.small?e.user.photos.small:N,alt:""})})}),Object(r.jsx)("div",{className:Ye.a.userActionBtn,children:e.user.followed?Object(r.jsx)("button",{type:"submit",onClick:function(){e.unfollowAccept(e.user.id)},disabled:e.followingInProgress.some((function(t){return t===e.user.id})),children:"Unfollow"}):Object(r.jsx)("button",{type:"submit",onClick:function(){e.followAccept(e.user.id)},disabled:e.followingInProgress.some((function(t){return t===e.user.id})),children:"Follow"})}),Object(r.jsxs)("div",{className:Ye.a.userInfo,children:[Object(r.jsx)("div",{className:Ye.a.userName,children:e.user.name}),Object(r.jsx)("div",{children:e.user.status})]})]})},Ke=function(e){var t=e.users,n=e.unfollowAccept,s=e.followAccept,a=e.followingInProgress;return Object(r.jsx)("div",{children:t.map((function(e){return Object(r.jsx)(Ze,{user:e,unfollowAccept:n,followAccept:s,followingInProgress:a},e.id)}))})},Qe=n(37),$e=n.n(Qe),et=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],s=0;s<t;s++)n.push(s+1);for(var a=[],c=function(t){if(0===t)return"continue";a.push(Object(r.jsx)("button",{type:"submit",onClick:function(){e.onPageChanged(t)},className:"".concat($e.a.pageNumber,"  ").concat(e.currentPage===t?$e.a.selectedPage:""),children:t},t))},i=e.currentPage-1;i<e.currentPage+4&&i<t;i++)c(i);return a.push(Object(r.jsx)("span",{children:"..."},0)),a},tt=function(e){var t=e.totalUsersCount,n=e.pageSize,s=e.currentPage,a=e.onPageChanged,c=e.isFetching,i=e.unfollowAccept,o=e.followAccept,u=e.followingInProgress,l=e.users;return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)(et,{totalUsersCount:t,pageSize:n,currentPage:s,onPageChanged:a})}),c?Object(r.jsx)(We,{}):Object(r.jsx)(Ke,{unfollowAccept:i,followAccept:o,followingInProgress:u,users:l})]})},nt=n(54),rt=function(e){return e.usersPage.users},st=function(e){return e.usersPage.pageSize},at=function(e){return e.usersPage.totalUsersCount},ct=function(e){return e.usersPage.currentPage},it=function(e){return e.usersPage.isFetching},ot=function(e){return e.usersPage.followingInProgress},ut=(Object(nt.a)(rt,(function(e){return e.filter((function(){return!0}))})),function(e){Object(ge.a)(n,e);var t=Object(me.a)(n);function n(){return Object(be.a)(this,n),t.apply(this,arguments)}return Object(he.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersRequest(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){var e=this;return Object(r.jsx)(tt,{unfollowAccept:this.props.unfollowAccept,followAccept:this.props.followAccept,followingInProgress:this.props.followingInProgress,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,isFetching:this.props.isFetching,onPageChanged:function(t){e.props.setCurrentPage(t),e.props.getUsersRequest(t,e.props.pageSize)}})}}]),n}(a.a.Component)),lt=Object(d.d)(Me,Object(u.b)((function(e){return{users:rt(e),pageSize:st(e),totalUsersCount:at(e),currentPage:ct(e),isFetching:it(e),followingInProgress:ot(e)}}),{setCurrentPage:function(e){return{type:q,currentPage:e}},getUsersRequest:function(e,t){return function(){var n=Object(b.a)(f.a.mark((function n(r){var s;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Q(!0)),n.prev=1,n.next=4,O(e,t);case 4:s=n.sent,r((c=s.items,{type:G,users:c})),r((a=s.totalCount,{type:V,totalUsersCount:a})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0);case 12:return n.prev=12,r(Q(!1)),n.finish(12);case 15:case"end":return n.stop()}var a,c}),n,null,[[1,9,12,15]])})));return function(e){return n.apply(this,arguments)}}()},followAccept:function(e){return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n($(!0,e)),t.prev=1,t.next=4,x(e);case 4:0===t.sent.resultCode&&n(Z(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:return t.prev=11,n($(!1,e)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()},unfollowAccept:function(e){return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n($(!0,e)),t.prev=1,t.next=4,v(e);case 4:0===t.sent.resultCode&&n(K(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:return t.prev=11,n($(!1,e)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}}))(ut),dt=n(38),jt=n.n(dt),pt=n(40),ft=function(e){var t=e.status,n=e.updateProfileStatus,a=e.isMy,c=Object(s.useState)(!1),i=Object(pt.a)(c,2),o=i[0],u=i[1],l=Object(s.useState)(t),d=Object(pt.a)(l,2),j=d[0],p=d[1];Object(s.useEffect)((function(){p(t)}),[t]);var f=function(){u(!0)};return Object(r.jsx)("div",{children:o?Object(r.jsx)("div",{children:Object(r.jsx)("input",{onChange:function(e){p(e.currentTarget.value)},onBlur:function(){u(!1),n(j)},type:"text",value:j})}):Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{onDoubleClick:f,children:t}),a&&Object(r.jsx)("button",{type:"submit",onClick:f,children:"Edit.."})]})})},bt=function(e){var t=e.profile,n=e.status,s=e.updateProfileStatus,a=Object(u.c)((function(e){return e.auth.userId}));return t?Object(r.jsxs)("div",{className:jt.a.profileInfo,children:[Object(r.jsx)("div",{className:jt.a.profileInfo__photo,children:Object(r.jsx)("img",{src:t.photos.large,alt:""})}),Object(r.jsx)("div",{children:Object(r.jsx)(ft,{isMy:a===t.userId,status:n,updateProfileStatus:s})})]}):Object(r.jsx)(We,{})},ht=n(39),gt=n.n(ht),mt=n(55),Ot=n.n(mt),xt=function(e){var t=e.text,n=e.likes;return Object(r.jsxs)("div",{className:Ot.a.item,children:[Object(r.jsx)("img",{src:"https://www.maybelline.com/~/media/mny/us/face-makeup/modules/pathing-switcher/face-category-pathing-switcher.jpg",alt:"face"}),t,Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{children:"like"}),Object(r.jsxs)("span",{children:[" ",n]})]})]})},vt=function(e){return Object(r.jsx)(ye.b,{onSubmit:function(t){e.addPost(t.newPostText)},render:function(e){var t=e.handleSubmit;return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsx)("div",{children:Object(r.jsx)(ye.a,{validate:Ce,name:"newPostText",placeholder:"Enter text",component:ze})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Add post"})})]})}})},_t=function(e){var t=e.posts,n=e.addPost,s=t.map((function(e){return Object(r.jsx)(xt,{id:e.id,text:e.message,likes:e.likesCount},e.id)}));return Object(r.jsxs)("div",{className:gt.a.postsBlock,children:[Object(r.jsx)("h3",{children:"My posts"}),Object(r.jsx)("div",{children:Object(r.jsx)(vt,{addPost:n})}),Object(r.jsx)("div",{className:gt.a.posts,children:s})]})},wt=Object(u.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e({type:E,postText:t})}}}))(_t),Pt=function(e){var t=e.profile,n=e.status,s=e.updateProfileStatus;return Object(r.jsxs)("div",{children:[Object(r.jsx)(bt,{profile:t,status:n,updateProfileStatus:s}),Object(r.jsx)(wt,{})]})},yt=function(e){Object(ge.a)(n,e);var t=Object(me.a)(n);function n(){return Object(be.a)(this,n),t.apply(this,arguments)}return Object(he.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,n=e.myId,r=e.getProfile,s=e.getStatus,a=t.params.userId||n;r(a),s(a)}},{key:"render",value:function(){var e=this.props,t=e.profile,n=e.status,s=e.updateProfileStatus;return Object(r.jsx)(Pt,{profile:t,status:n,updateProfileStatus:s})}}]),n}(a.a.Component),It=Object(d.d)(Me,Object(u.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,myId:e.auth.userId}}),{getProfile:D,getStatus:function(e){return function(){var t=Object(b.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:r=t.sent,n(U(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateProfileStatus:function(e){return function(){var t=Object(b.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e);case 2:0===(r=t.sent).resultCode?n(U(e)):console.log("error:".concat(r.messages));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Oe.f)(yt),St=n(31),Ct=n.n(St),Nt=function(e){var t=e.isAuth,n=e.login,s=e.logout;return Object(r.jsxs)("header",{className:Ct.a.header,children:[Object(r.jsx)(o.b,{className:Ct.a.header__logo,to:"",children:Object(r.jsx)("img",{src:"https://www.veeam.com/content/dam/veeam/global/veeam-graphics/veeam_logo_white-500.png.web.1280.1280.png?ck=1572622163865&ck=1572622163865",alt:"logo"})}),Object(r.jsx)("div",{className:Ct.a.loginBlock,children:t?Object(r.jsxs)("div",{children:[n,Object(r.jsx)("button",{type:"submit",onClick:s,children:"Log out"})]}):Object(r.jsx)(o.b,{to:"/login",children:"Login"})})]})},Et=function(e){Object(ge.a)(n,e);var t=Object(me.a)(n);function n(){return Object(be.a)(this,n),t.apply(this,arguments)}return Object(he.a)(n,[{key:"render",value:function(){return Object(r.jsx)(Nt,Object(g.a)({},this.props))}}]),n}(a.a.Component),kt=Object(u.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:0===e.sent.resultCode&&t(se(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Et),Mt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(t,n){return t||n(e)}),void 0)}},At=function(e){var t=e.loginRequest,n=e.formError;return Object(r.jsx)(ye.b,{onSubmit:function(){var e=Object(b.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.email,n.password,n.rememberMe));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),render:function(e){var t=e.handleSubmit,s=e.submitting;return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsx)("div",{children:Object(r.jsx)(ye.a,{validate:Mt(Ce,Ne(20),Ee(5)),placeholder:"Email",name:"email",component:Be})}),Object(r.jsx)("div",{children:Object(r.jsx)(ye.a,{validate:Mt(Ce,Ne(20),Ee(6)),placeholder:"Password",name:"password",type:"password",component:Be})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(ye.a,{name:"rememberMe",id:"rememberMe",component:"input",type:"checkbox"})," ",Object(r.jsx)("span",{htmlFor:"rememberMe",children:" remember me"})]}),Object(r.jsx)("div",{children:n&&Object(r.jsx)("div",{className:Re.a.errorText,children:n})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",disabled:s,children:"Login"})})]})}})},Tt=Object(u.b)((function(e){return{isAuth:e.auth.isAuth,formError:e.auth.formError}}),(function(e){return{loginRequest:function(t,n,r){return e(function(e,t,n){return function(){var r=Object(b.a)(f.a.mark((function r(s){var a,c;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,S(e,t,n);case 2:0===(a=r.sent).resultCode?(s(ce()),s(ae(null))):(c=a.messages[0]||"Some error",s(ae(c)));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(t,n,r))}}}))((function(e){var t=e.isAuth,n=e.formError,s=e.loginRequest;return t?Object(r.jsx)(Oe.a,{to:"/profile"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)(At,{formError:n,loginRequest:s})]})})),Ut=function(e){Object(ge.a)(n,e);var t=Object(me.a)(n);function n(){return Object(be.a)(this,n),t.apply(this,arguments)}return Object(he.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.initialize)()}},{key:"render",value:function(){return this.props.initialized?Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)(kt,{}),Object(r.jsx)(_e,{}),Object(r.jsxs)("div",{className:"app-wrapper-content",children:[Object(r.jsx)(Oe.b,{path:"/dialogs",render:function(){return Object(r.jsx)(qe,{})}}),Object(r.jsx)(Oe.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(It,{})}}),Object(r.jsx)(Oe.b,{path:"/news",component:we}),Object(r.jsx)(Oe.b,{path:"/music",component:Pe}),Object(r.jsx)(Oe.b,{path:"/settings",component:Ae}),Object(r.jsx)(Oe.b,{path:"/users",component:lt}),Object(r.jsx)(Oe.b,{path:"/login",component:Tt})]})]}):Object(r.jsx)(We,{})}}]),n}(a.a.Component),Dt=Object(d.d)(Oe.f,Object(u.b)((function(e){return{initialized:e.app.initialized}}),{initialize:function(){return function(e){var t=e(ce());Promise.all([t]).then((function(){e({type:oe})}))}}}))(Ut);i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(o.a,{basename:"/social-network",children:Object(r.jsx)(u.a,{store:fe,children:Object(r.jsx)(Dt,{})})})}),document.getElementById("root")),l()}},[[88,1,2]]]);
//# sourceMappingURL=main.2e612d55.chunk.js.map